(function(){var S=".",B;function I(V,Z,X,W){var Y;if(V!==true){Z=Z||"";X=X||"";W=W||0;Y="Assertion";if((X.length>0)&&(W>0)){Y+=" at "+X+":"+W}Y+=" failed";if(Z.length>0){Y+=": "+Z}throw new Error(Y)}}function H(Y,X,V){var W,Z;if(window.console&&window.console.log&&(Y.length>0)){X=X||"";V=V||0;W=new Date();Z="["+W.toString()+"]";if((X.length>0)&&(V>0)){Z+=" "+X+":"+V}Z+=": "+Y;window.console.log(Z)}}function K(W){var V=typeof (W);if("object"===V){if(null===W){V="null"}else{if(W instanceof Array){V="array"}}}else{if("number"===V){if(isFinite(W)){V="number"}else{if(isNaN(W)){V="NaN"}else{if(Infinity===W){V="+Infinity"}else{if(-Infinity===W){V="-Infinity"}else{V=""}}}}}else{if("boolean"===V){V="bool"}}}return V}function E(V){return("array"===K(V))}function P(V){return("bool"===K(V))}function U(V){return("number"===K(V))}function Q(V){return("function"===K(V))}function N(W){var V=false;if("number"===K(W)){V=(false===/\./.test(W))}return V}function T(V){return("null"===K(V))}function L(V){return("object"===K(V))}function M(V){return("string"===K(V))}function J(V){return("undefined"===K(V))}function R(Y,X){var V="\t";X=X||1;function W(f,e){var c,b,Z,d,a;if(f<X){c=K(e);b="";if(("array"===c)||("object"===c)){for(a=0;a<f;a+=1){b+=V}}switch(c){case"array":d=e.length;if(d>0){Z="[\n";for(a=0;a<d;a+=1){Z+=b+V+a+": "+W(f+1,e[a])+"\n"}Z+=b+"]"}else{Z="[]"}break;case"bool":Z=(true===e)?"true":"false";break;case"function":Z="<function>";break;case"+Infinity":case"-Infinity":case"NaN":Z=c;break;case"null":Z="null";break;case"number":Z=e+(N(e)?"::int":"::float");break;case"object":Z="";for(a in e){Z+=b+V+a+": "+W(f+1,e[a])+"\n"}if(Z.length>0){Z="{\n"+Z+b+"}"}else{Z="{}"}break;case"string":Z='"'+e+'"';break;case"undefined":Z="undefined";break;default:Z="<unknown>"}}else{Z="..."}return Z}return W(0,Y)}B={Debug:{assert:I,log:H,dump:R}};function G(X){var V={},Y,W;if(L(X)||E(X)){for(Y in X){if(X.hasOwnProperty(Y)){V[Y]=G(X[Y])}}}else{V=X}return V}function O(W,V){var Y;V=V||{};function X(f,d,e){var b,Z,c,g,a,h;b=d.split(S);Z=f;for(c=0,g=b.length;c<g;c+=1){a=b[c];if((Z.hasOwnProperty&&(!Z.hasOwnProperty(a)))||(undefined===Z[a])){Z[a]={}}Z=Z[a]}for(a in e){if(e.hasOwnProperty(a)){h=e[a];if(L(h)){X(Z,a,h)}else{Z[a]=G(h)}}}return Z}Y=X(window,W,V);return Y}function A(W,Y,X){var a,V,Z,b;a=W.split(S);V=a.pop();Z=O(a.join(S));Z[V]=Y;for(b in X){if(X.hasOwnProperty(b)){Y.prototype[b]=G(X[b])}}}function D(Z,Y){var W=false,X,V;if(E(Y)){for(X=0,V=Y.length;X<V;X+=1){if(Z===Y[X]){W=true;break}}}return W}function F(Y){var V,W=/\s/,X;V=Y.replace(/^\s\s*/,"");X=V.length;while((X>0)&&W.test(V.charAt(X-1))){X-=1}V=V.slice(0,X);return V}function C(W){var V;V=F(W);V=V.replace(/\s+/," ");return V}O("CK",B);O("CK",{namespace:O,defineClass:A,inArray:D,trim:F,collapse:C,DataType:{isArray:E,isBool:P,isFloat:U,isFunction:Q,isInt:N,isNull:T,isObject:L,isString:M,isUndefined:J},Models:{},Serialisers:{},Formatters:{},Apps:{}})}());(function(){var B=CK.DataType;function E(I){var H=null,J;if(B.isInt(I)){H=I}else{if(B.isString(I)){if(/^-?\d+$/.test(I)){J=parseInt(I,10);if(!isNaN(J)){H=J}}}}return H}function A(H){return !B.isNull(E(H))}function D(I){var H=null,L,K,J;if(B.isFloat(I)){H=I}else{if(B.isString(I)){L=/^-?\d+(\.\d*)?$/.test(I);K=/^-?\.\d+$/.test(I);if(L||K){J=parseFloat(I);if(!isNaN(J)){H=J}}}}return H}function G(H){return !B.isNull(D(H))}function C(I){var H=null,K,J,L;if(B.isString(I)){K=I.match(/^(-?\d+)\/(\d+)$/);if(null!==K&&(3===K.length)){J=parseInt(K[1],10);L=parseInt(K[2],10);if(!(isNaN(J)||isNaN(L)||(0===L))){H=[J/L,J,L]}}}return H}function F(H){return !B.isNull(C(H))}CK.namespace("CK.InputChecker",{getInt:E,isInt:A,getFloat:D,isFloat:G,getFraction:C,isFraction:F})}());(function(){var B=CK.DataType,C={},A={CALORIES:1,KILOJOULES:2,TOTAL_FAT:3,SAT_FAT:4,TRANS_FAT:5,CHOLESTEROL:6,SODIUM:7,TOTAL_CARBS:8,FIBER:9,SUGARS:10,SUGAR_ALCOHOL:11,PROTEIN:12,CALCIUM:13,POTASSIUM:14,ALCOHOL:15};CK.namespace("CK.Models.NutrientType",A);CK.namespace("CK.Models.NutrientType",{values:function(){var E,D;E=[];for(D in A){if(A.hasOwnProperty(D)){E=E.concat(A[D])}}return E},formattingRules:function(D){var E;D=D||null;E=C;if(B.isObject(D)){C=D}return E}})}());(function(){var B=CK.DataType,A=CK.Models.NutrientType;function C(E,D){this._type=E;this._amount=D}CK.defineClass("CK.Models.Nutrient",C,{getType:function(){return this._type},getAmount:function(){return this._amount},scale:function(E){var D;D=this._amount;if(!B.isNull(D)){D*=E}return new C(this._type,D)}})}());(function(){var C=CK.DataType,A=CK.Models.NutrientType,B=CK.Models.Nutrient;function D(){var F=A.values(),G,E,H;this._set={};for(G=0,E=F.length;G<E;G+=1){H=F[G];this._set[H]=new B(H,null)}}CK.defineClass("CK.Models.NutrientSet",D,{get:function(E){return this._set[E]},set:function(J,I){var F=A.values(),K,H,E,G;K=new D();for(H=0,E=F.length;H<E;H+=1){G=F[H];if(G!==J){K._set[G]=this._set[G]}else{K._set[G]=new B(G,I)}}return K},scale:function(H){var F=A.values(),J,G,E,I;J=new D();for(G=0,E=F.length;G<E;G+=1){I=F[G];J._set[I]=this._set[I].scale(H)}return J}})}());(function(){var A=CK.Models.NutrientSet;function B(C,D){this._name=C;this._nutrientSet=D}CK.defineClass("CK.Models.Serving",B,{getName:function(){return this._name},nutrientSet:function(){return this._nutrientSet}})}());(function(){var A=CK.Models.Serving;function B(J,C,I,D,G,F,E,H){this._id=J;this._url=C;this._title=I;this._calorieDensityStars=D;this._brandName=G;this._categoryName=F;this._description=E;this._servings=H}CK.defineClass("CK.Models.DatabaseFood",B,{getID:function(){return this._id},getURL:function(){return this._url},getTitle:function(){return this._title},getCalorieDensityStars:function(){return this._calorieDensityStars},getBrandName:function(){return this._brandName},getCategoryName:function(){return this._categoryName},getDescription:function(){return this._description},servings:function(){var F,D,C,E;F=[];for(D=0,C=this._servings.length;D<C;D+=1){E=this._servings[D];F[D]=E}return F},serving:function(D){var C;C=this._servings[D];return C}})}());(function(){var B=CK.DataType,A=CK.Models.NutrientType;function D(G){var H,F,E;if(!B.isObject(G)){return null}if(!G.hasOwnProperty("dr")){return null}H=G.dr;if(!((B.isFloat(H)&&(H>0))||B.isNull(H))){return null}if(!G.hasOwnProperty("u")){return null}F=G.u;if(!B.isString(F)){return null}if(0===F.length){return null}if(!G.hasOwnProperty("p")){return null}E=G.p;if(!B.isInt(E)){return null}if(F.precision<0){return null}return{daily_requirement:H,units:F,precision:E}}function C(H){var F=A.values(),K,G,E,I,J;if(!B.isObject(H)){return null}K={};for(G=0,E=F.length;G<E;G+=1){I=F[G];if(!H.hasOwnProperty(I)){return null}J=D(H[I]);if(B.isNull(J)){return null}K[I]=J}return K}CK.namespace("CK.Serialisers",{NutrientFormatRules:C})}());(function(){var D=CK.DataType,I=CK.Models.NutrientType,B=CK.Models.NutrientSet,C=CK.Models.Serving,H=CK.Models.DatabaseFood;function F(M){var O=new B(),P,L,J,N,K;if(!D.isObject(M)){return null}P=I.values();for(L=0,J=P.length;L<J;L+=1){N=P[L];if(!M.hasOwnProperty(N)){return null}K=M[N];if(!((D.isFloat(K)&&(K>=0))||D.isNull(K))){return null}O=O.set(N,K);K=null;N=null}return O}function E(K){var J,L;if(!D.isObject(K)){return null}if(!K.hasOwnProperty("n")){return null}J=K.n;if(!D.isString(J)){return null}else{if(0===J.length){return null}}if(!K.hasOwnProperty("ns")){return null}L=F(K.ns);if(D.isNull(L)){return null}return new C(J,L)}function A(L){var M,K,J,N;if(!D.isArray(L)){return null}else{if(0===L.length){return null}}M=[];for(K=0,J=L.length;K<J;K+=1){N=E(L[K]);if(D.isNull(N)){return null}M=M.concat(N);N=null}return M}function G(Q){var K,J,O,L,R,M,P,N;if(!D.isObject(Q)){return null}if(!Q.hasOwnProperty("i")){return null}K=Q.i;if(!D.isString(K)){return null}else{if(0===K.length){return null}}if(!Q.hasOwnProperty("t")){return null}O=Q.t;if(!D.isString(O)){return null}else{if(0===O.length){return null}}if(!Q.hasOwnProperty("u")){return null}J=Q.u;if(!D.isString(J)){return null}else{if(0===J.length){return null}}if(!Q.hasOwnProperty("cs")){return null}L=Q.cs;if(!D.isInt(L)){return null}else{if((L<0)||(L>4)){return null}}if(!Q.hasOwnProperty("bn")){return null}R=Q.bn;if(!D.isString(R)){return null}else{if(0===R.length){return null}}if(!Q.hasOwnProperty("cn")){return null}M=Q.cn;if(!D.isString(M)){return null}else{if(0===M.length){return null}}if(!Q.hasOwnProperty("d")){return null}P=Q.d;if(!D.isString(P)){return null}else{if(0===P.length){return null}}if(!Q.hasOwnProperty("s")){return null}N=A(Q.s);if(D.isNull(N)){return null}return new H(K,J,O,L,R,M,P,N)}CK.namespace("CK.Serialisers",{DatabaseFood:G})}());(function(){var D=CK.DataType,B=CK.Models.NutrientType,C=CK.Models.Nutrient,A=CK.Models.NutrientSet;function H(I){this._nutrientSet=I;this._rules=B.formattingRules()}function G(L,J){var K,I;K=Math.pow(10,J);I=Math.round(L*K)/K;return I}function F(K){var I=null,L,M,J;L=K.getAmount();if(!D.isNull(L)){M=K.getType();J=this._rules[M].precision;if((J>0)&&(L>0)&&(L<0.1)){I="< 0.1"}else{I=G(L,J).toString()}}return I}function E(J){var K,I;K=J.getType();I=this._rules[K].units;return I}CK.defineClass("CK.Formatters.NutrientSet",H,{amount:function(L){var I="",J,K;J=this._nutrientSet.get(L);K=F.call(this,J);if(!D.isNull(K)){I=K}return I},amountUnits:function(M){var I="",K,L,J;K=this._nutrientSet.get(M);L=F.call(this,K);if(!D.isNull(L)){J=E.call(this,K);I=L+J}return I},dailyValuePercentage:function(L){var I="",M,J,K;M=this._rules[L].daily_requirement;if(!D.isNull(M)){J=this._nutrientSet.get(L);K=J.getAmount();if(!D.isNull(K)){K=K/M*100;if((K>0)&&(K<1)){I="< 1%"}else{if(K>=1){I=G(K,0).toString()+"%"}else{I="0%"}}}}return I}})}());(function(){var P=CK.DataType,D=CK.Serialisers,U=CK.InputChecker,K=CK.Models.NutrientType,G=CK.Models.NutrientSet,S=CK.Models.DatabaseFood,B=CK.Formatters,O=null,R={food:null,quantity:1,serving:0},N={};function L(W){var V=null,X;X=CK.trim(W);X=U.getFloat(X);if(P.isNull(X)){X=U.getFraction(W);if(!P.isNull(X)){X=X[0]}}if(!P.isNull(X)){if(X>0){V=X}}return V}function F(X,Y,W){var V=null,Z;Z=CK.trim(X);Z=U.getInt(Z);if(!P.isNull(Z)){if((Y<=Z)&&(Z<=W)){V=Z}}return V}function M(Y,X){var W={walking:3.3,jogging:8,swimming:11,cycling:6},V={};$.each(W,function(a,Z){V[a]=Math.round(Y/(Z*(X/24))*60)});return V}function I(V,X){var W;W=new B.NutrientSet(X);V.text(W.amount(K.CALORIES))}function A(W){var V;V=W.get(K.TOTAL_FAT).getAmount();if(P.isFloat(V)){V*=9}return{fatCalories:V}}function T(V,Y){var Z,W,X;Z=A(Y);W=new B.NutrientSet(Y);V.find(".calories .amount").text(W.amount(K.CALORIES));V.find(".kilojoules .amount").text(W.amount(K.KILOJOULES));if(!P.isNull(Z.fatCalories)){V.find(".fat-calories .amount").text(Math.round(Z.fatCalories))}X=V.find(".total-fat");X.find(".amount").text(W.amountUnits(K.TOTAL_FAT));X.find(".daily-value").text(W.dailyValuePercentage(K.TOTAL_FAT));X=V.find(".sat-fat");X.find(".amount").text(W.amountUnits(K.SAT_FAT));X.find(".daily-value").text(W.dailyValuePercentage(K.SAT_FAT));V.find(".trans-fat .amount").text(W.amountUnits(K.TRANS_FAT));X=V.find(".cholesterol");X.find(".amount").text(W.amountUnits(K.CHOLESTEROL));X.find(".daily-value").text(W.dailyValuePercentage(K.CHOLESTEROL));X=V.find(".sodium");X.find(".amount").text(W.amountUnits(K.SODIUM));X.find(".daily-value").text(W.dailyValuePercentage(K.SODIUM));X=V.find(".total-carbs");X.find(".amount").text(W.amountUnits(K.TOTAL_CARBS));X.find(".daily-value").text(W.dailyValuePercentage(K.TOTAL_CARBS));X=V.find(".fiber");X.find(".amount").text(W.amountUnits(K.FIBER));X.find(".daily-value").text(W.dailyValuePercentage(K.FIBER));V.find(".sugars .amount").text(W.amountUnits(K.SUGARS));V.find(".sugar-alcohol .amount").text(W.amountUnits(K.SUGAR_ALCOHOL));V.find(".protein .amount").text(W.amountUnits(K.PROTEIN));V.find(".calcium .amount").text(W.amountUnits(K.CALCIUM));V.find(".potassium .amount").text(W.amountUnits(K.POTASSIUM));V.find(".alcohol .amount").text(W.amountUnits(K.ALCOHOL))}function J(V,W){$.each(V,function(X){V[X].text(W[X])})}function E(d,V,e){var X=0,b=false,Z=V.food.servings(),a,Y,c,W;a=F(d.serving.val(),X,Z.length-1);if(P.isNull(a)){a=X;d.serving.val(a)}b=(a!==V.serving)||b;V.serving=a;Y=L(d.quantity.val());if(!P.isNull(Y)){b=(Y!==V.quantity)||b;V.quantity=Y;d.errorMessage.css("display","none")}else{b=false;if(""!==d.quantity.val()){d.errorMessage.css("display","block")}}if(b){c=Z[a].nutrientSet().scale(Y);I(d.calorieDisplay,Z[a].nutrientSet().scale(Y));T(d.label,Z[a].nutrientSet().scale(Y));W=c.get(K.CALORIES).getAmount();J(d.exerciseMinutes,M(W,e))}else{}}function C(a){var Z=a.searchBar,Y=a.foodBreadcrumbs,X=a.profileSell,W=a.searchBar.offset().top,V="Food search";if(!a.foodSearchKeywords.is(":focus")&&""===$.trim(a.foodSearchKeywords.val())){a.foodSearchKeywords.val(V)}$(window).scroll(function(){var b=$(this).scrollTop();Z.toggleClass("sticky",b>W);Y.toggleClass("marginCounter",b>W);X.toggleClass("marginCounter",b>W)});a.foodSearchKeywords.on({focus:function(){if(V===$(this).val()){$(this).val("")}},blur:function(){if(""===$.trim($(this).val())){$(this).val(V)}}})}function Q(Y){var V,d,e,i,b,f,c,X,a,h,W,j,Z,g;V=$("#mSearch");d=$("#food-search-keywords");e=$("#food-heading");i=$("#food-breadcrumbs");g=$("#profile-sell");b=$('input[name="amount"]').keyup(function(){Y()});f=$('select[name="units"]').change(function(){Y()});c=$("span#numError");X=$("#mCal, #mCalLabel");a=$("span.calorie-display");h=$("div.nutrient-facts");W=$("div.nutrient-facts td");j={walking:$("span#exwalking span.mMins"),jogging:$("span#exjogging span.mMins"),swimming:$("span#exswimming span.mMins"),cycling:$("span#excycling span.mMins")};Z=$("#exwalking, #exjogging, #exswimming, #excycling");return{searchBar:V,foodSearchKeywords:d,foodHeading:e,foodBreadcrumbs:i,quantity:b,serving:f,errorMessage:c,mainCalorieDisplay:X,calorieDisplay:a,label:h,nutrientFactTDs:W,exerciseMinuteCircles:Z,exerciseMinutes:j,profileSell:g}}function H(X,W,V){$(X).click(function(a){var Y=$(this).attr("href");try{ga("send","event","Outbound Links",W,V);a.preventDefault();setTimeout(function(){window.location.href=Y},100)}catch(Z){}})}N.init=function(V,W,X){K.formattingRules(D.NutrientFormatRules(V));R.food=D.DatabaseFood(W);$(document).ready(function(){O=Q(function(){E(O,R,X)});C(O)})};CK.namespace("CK.Apps",{FoodView:N})}());